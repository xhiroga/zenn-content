---
title: "Reactã§ç„¡é™ãƒ«ãƒ¼ãƒ—æ›¸ã„ã¡ã‚ƒã£ã¦ã¾ã—ãŸï¼ˆåçœï¼‰"
emoji: "ğŸ”–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["React", "ReactNative", "firebase"]
published: true
---

## TL;DR

useEffect ã®ç¬¬äºŒå¼•æ•°ã®å€¤ã‚’ useEffect ã§å¤‰æ›´ã—ã¦ã„ãŸ

## ä½•ãŒèµ·ããŸã®ã‹ï¼Ÿ

çœ æ°—ã¨ Firebase ã®ä»•æ§˜ã¨æˆ¦ã„ãªãŒã‚‰å®Œæˆã•ã›ãŸã‚³ãƒ¼ãƒ‰ãŒãƒã‚°ã£ã¦ã¾ã—ãŸï¼ˆç§ç‰©ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã§ã™ï¼‰

```tsx
const authUser = useContext(AuthUserContext);
const [user, setUser] = useState<User | null | undefined>(undefined);
useEffect(() => {
  if (authUser === undefined || authUser === null) {
    setUser(null);
  } else {
    getUserById(authUser.uid).then(setUser);
  }
}, [authUser, user]);
```

useEffect ã®ä¸­ã§ setUser ã—ã¦ã€ãã®åº¦ã« user ãŒå¤‰ã‚ã‚‹ã‹ã‚‰...
Firebase ã«æ•°åƒã‚¢ã‚¯ã‚»ã‚¹ã‚’ã—ã¦ã„ã‚‹ã“ã¨ã«æ°—ã¥ã„ãŸã®ã§å±ã†ããƒªãƒªãƒ¼ã‚¹å‰ã«æ°—ã¥ã‘ã¾ã—ãŸã€‚

## ã“ã‚Œæ™®é€šã«ãƒãƒã‚‹ã®ã§ã¯ï¼Ÿ

ã‚ã£ã¦ãŸã€‚åŒã˜ã“ã¨ã‚’ã‚„ã£ã¦ã‚‹äººãŒã„ã¾ã—ãŸã€‚
https://stackoverflow.com/questions/62289414/stop-infinite-loop-on-useeffect-using-firebase

## å†ç™ºé˜²æ­¢

æ­£ç›´ãªã¨ã“ã‚ã‚ã‹ã‚‰ã‚“
ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¢ãƒ—ãƒªã®ç•°å¸¸æ¤œçŸ¥ãƒ„ãƒ¼ãƒ«ãŒæ¬²ã—ã„ã§ã™ã€‚
